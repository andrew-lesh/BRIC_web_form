<!-- Hi Fox!!! c: -->
<!-- andrew ur so cool B) -->


<!--
    1. Multiple Choice bubble thing for 13 and over 
        (bubble for 13 or over, bubble for below 13)
          If 13 or over, first and last name fields appear
          If below 13, first name field appears and parent signature field appears
            If parent name typed into parent signature field, last name field appears
    2. Field for "Sending your wish to space" (character limit TBD (do we want to stop people from
        pasting the entire bee movie script?  That would be funny lol))
            Need disclaimer to warn user from typing personally identifiable information (address, SSN, horoscope, genome, email)
    3. Submit button that submits data to storage and generates certificate for client-side printing 
            Dialogue box appears to notify of successful submission
    4. Privacy policy on page states that names are only collected to be stored on sd card and that parent 
       signatures are only collected to indicate parental approval.

    https://api.apispreadsheets.com/data/15941/
    -->


<!DOCTYPE html>
<html>
<head>
<title>Save Web Form Data to Spreadsheets - Contact Form</title>

<!--Import jquery-->
<script
    src="https://code.jquery.com/jquery-3.4.1.js"
    integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
    crossorigin="anonymous"></script>
<script>

// form submission jquery code that we stole
function SubForm (){
    $.ajax({
        url:'https://api.apispreadsheets.com/data/15990/',
        type:'post',
        data:$("#myForm").serializeArray(),
        success: function(){
            alert("Form Data Submitted :)")
        },
        error: function(){
            alert("There was an error :(")
        }
    });
}

// saves "fullName" locally so that we can use it for the certificate later 
function SaveName(){
    var inputName= document.getElementById("fullName");
    sessionStorage.setItem("fullName", inputName.value);
}

// will make the fullName show up when you hit the button
const listen = event => {
        const p = document.createElement('p');
        
        var storedValue = sessionStorage.getItem("fullName");
        p.innerText = storedValue;
        document.querySelector('#container').appendChild(p);
}

</script>


<style>
    input[type=text], select {
      font-family: Verdana, Geneva, Tahoma, sans-serif;
      width: 100%;
      padding: 12px 20px;
      margin: 8px 0;
      display: inline-block;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }
    
    input[type=submit] {
      font-family: Verdana, Geneva, Tahoma, sans-serif;
      font-size: larger;
      width: 100%;
      background-color: #4CAF50;
      color: white;
      padding: 14px 20px;
      margin: 8px 0;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    
    input[type=submit]:hover {
      background-color: #45a049;
    }
    
    div {
      border-radius: 5px;
      background-color: #f2f2f2;
      padding: 20px;
    }
</style>


</head>
<body>
    <!--Make the form. Once again code that we stole lol-->
    <form id="myForm">

    <!--Name-->
    <label style="font-family:verdana;font-size:150%;" for = "fullName">Name</label>
    <br/>
    <label style="font-family:verdana;font-size:90%;" >If you're under 13, don't include your last name unless you have parent/guardian approval!</label>
    <br/>
    <input type = "text" id = "fullName" name="name" />
    <br/>
    <br/>
    
    <!--Signature-->
    <label style="font-family:verdana;font-size:150%;" >Parent/Guardian Signature</label>
    <br/>
    <label style="font-family:verdana;font-size:90%;" >If you're under 13, have your parent or guardian sign their name here if you want to include your last name.</label>
    <br/>
    <input type = "text" name="signature" />
    <br/>
    <br/>
    
    <!--Message-->
    <label style="font-family:verdana;font-size:150%;" >Message</label>
    <br/>
    <label style="font-family:verdana;font-size:90%;" >Make a wish or send a message to the International Space Station!</label>
    <br/>
    <br/>
    <textarea placeholder="Make a wish!" rows="10" cols="50" name="message" >
    </textarea>
    <br/>
    <br/>

    </form>

    <!--Button to submit the form and save the fullName-->
    <input type="submit" value="Submit your name and message to the ISS!" onclick="SubForm(); SaveName();">
    <br/><br/>

    <!--Button to make the crigull show up-->
    <input type="submit" value="Generate your certificate!"onclick="DrawCanvas();">
    <br/><br/>

    <!--Initialize the image and canvas-->
    <img hidden id="crigull" width="220" height="277" src="crigull.jpeg" alt="crigull">
    <canvas id="myCanvas" width="240" height="297" style="border:1px solid #d3d3d3;"></canvas>

<script>
    // Function to make the certificate show up
    function DrawCanvas(){
        window.onclick = function() {
            var c = document.getElementById("myCanvas");
            var ctx = c.getContext("2d");
            var img = document.getElementById("crigull");
            ctx.drawImage(img, 10, 10, 220, 277);
            ctx.font = "30px Comic Sans MS";
            var storedValue = sessionStorage.getItem("fullName");
            ctx.fillText(storedValue, 50, 50);
        }
    }
</script>

</body>
</html>